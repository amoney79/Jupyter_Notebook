# Task: Ubuntu-Inspired Data Analysis with Pandas & Matplotlib

# --- Imports ---
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
from sklearn.datasets import load_iris

# --- Task 1: Load and Explore the Dataset ---
def load_dataset():
    try:
        # Load Iris dataset from sklearn
        iris = load_iris(as_frame=True)
        df = iris.frame  # Convert to pandas DataFrame
        df['species'] = df['target'].map(dict(enumerate(iris.target_names)))  # Add species column
        print("✓ Dataset successfully loaded.\n")
        return df
    except FileNotFoundError:
        print("✗ File not found. Please check the dataset path.")
    except Exception as e:
        print(f"✗ Error loading dataset: {e}")

df = load_dataset()

# Display first few rows
print("First 5 rows of dataset:")
print(df.head(), "\n")

# Explore structure
print("Dataset Info:")
print(df.info(), "\n")

print("Missing Values:")
print(df.isnull().sum(), "\n")

# Clean dataset (Iris has no missing values, but we demonstrate)
df = df.dropna()

# --- Task 2: Basic Data Analysis ---
print("Basic Statistics:")
print(df.describe(), "\n")

# Grouping: mean petal length per species
grouped = df.groupby("species")["petal length (cm)"].mean()
print("Average Petal Length per Species:")
print(grouped, "\n")

# --- Task 3: Data Visualization ---
plt.style.use("seaborn-v0_8")

# 1. Line chart (trend of sepal length across samples)
plt.figure(figsize=(8,5))
plt.plot(df.index, df["sepal length (cm)"], label="Sepal Length")
plt.title("Line Chart: Sepal Length Trend")
plt.xlabel("Sample Index")
plt.ylabel("Sepal Length (cm)")
plt.legend()
plt.show()

# 2. Bar chart (average petal length per species)
plt.figure(figsize=(8,5))
grouped.plot(kind="bar", color=["skyblue","lightgreen","salmon"])
plt.title("Bar Chart: Average Petal Length per Species")
plt.xlabel("Species")
plt.ylabel("Average Petal Length (cm)")
plt.show()

# 3. Histogram (distribution of sepal width)
plt.figure(figsize=(8,5))
plt.hist(df["sepal width (cm)"], bins=20, color="purple", alpha=0.7)
plt.title("Histogram: Sepal Width Distribution")
plt.xlabel("Sepal Width (cm)")
plt.ylabel("Frequency")
plt.show()

# 4. Scatter plot (sepal length vs petal length)
plt.figure(figsize=(8,5))
sns.scatterplot(x="sepal length (cm)", y="petal length (cm)", hue="species", data=df)
plt.title("Scatter Plot: Sepal Length vs Petal Length")
plt.xlabel("Sepal Length (cm)")
plt.ylabel("Petal Length (cm)")
plt.legend(title="Species")
plt.show()

# --- Findings / Observations ---
print("Observations:")
print("- Iris setosa has the smallest average petal length.")
print("- Iris virginica has the largest average petal length.")
print("- Sepal width distribution is fairly normal but slightly skewed.")
print("- Scatter plot shows clear species separation based on sepal and petal length.")
